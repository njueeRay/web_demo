# 华容道游戏与求解器

这是一个基于Django框架开发的华容道游戏与求解器项目。项目支持3阶、4阶和5阶华容道游戏，并提供智能求解功能。

## 功能特性

1. **游戏功能**
   - 支持3阶、4阶、5阶华容道
   - 实时计时器
   - 步数统计
   - 音乐开关（预留功能）
   - 动态布局生成
   - 自动判断胜利条件

2. **求解器功能**
   - 支持任意有效布局求解
   - A*算法智能寻路
   - 曼哈顿距离启发式
   - 可显示详细解题步骤
   - 自动验证布局可解性

3. **交互特性**
   - 响应式界面设计
   - 动画效果
   - 实时布局获取
   - 步骤可视化展示

## 技术实现

### 后端实现
- **框架**: Django 4.2.0+
- **核心算法**: 
  - A*搜索算法（优化版）
  - 曼哈顿距离启发式函数
  - 布局可解性判定算法

### 前端实现
- **技术栈**: 原生JavaScript + HTML5 + CSS3
- **特性**:
  - Grid布局
  - Flex布局
  - CSS3动画
  - 响应式设计

### 关键算法

1. **布局可解性判定**:
   - 奇数阶（3阶、5阶）：逆序数为偶数时可解
   - 偶数阶（4阶）：空格所在行数（从底部数）+ 逆序数为偶数时可解

2. **A*寻路算法**:
   ```python
   f(n) = g(n) + h(n)
   # g(n): 从起始状态到当前状态的实际代价
   # h(n): 从当前状态到目标状态的估计代价（曼哈顿距离）
   ```

3. **随机布局生成**:
   - 从目标状态开始
   - 执行随机有效移动
   - 自动保证可解性

## 项目结构

```
华容道/
├── funny_game/
│   ├── templates/
│   │   └── funny_game/
│   │       └── solve_puzzle.html  # 主界面模板
│   └── views.py                   # 游戏逻辑处理
├── static/                        # 静态资源目录
├── requirements.txt               # 项目依赖
├── settings.py                    # Django配置文件
├── urls.py                        # URL路由配置
└── wsgi.py                       # WSGI服务器配置
```

## 部署说明

1. **环境要求**:
   ```
   Python 3.6+
   Django 4.2.0+
   ```

2. **安装步骤**:
   ```bash
   # 1. 创建虚拟环境
   python -m venv venv
   
   # 2. 激活虚拟环境
   # Windows:
   venv\Scripts\activate
   # Linux/Mac:
   source venv/bin/activate
   
   # 3. 安装依赖
   pip install -r requirements.txt
   
   # 4. 运行开发服务器
   python manage.py runserver
   ```

3. **访问方式**:
   - 开发环境：http://127.0.0.1:8000
   - 生产环境：根据具体部署方式配置

## 性能优化

1. **算法优化**:
   - 使用优先队列优化A*搜索
   - 优化曼哈顿距离计算
   - 智能超时处理

2. **前端优化**:
   - 最小化DOM操作
   - 使用事件委托
   - CSS3硬件加速

## 注意事项

1. 在生产环境部署时：
   - 修改`settings.py`中的`DEBUG`为`False`
   - 配置正确的`ALLOWED_HOSTS`
   - 使用安全的`SECRET_KEY`
   - 配置静态文件服务

2. 性能考虑：
   - 3阶和4阶华容道通常能快速求解
   - 5阶华容道可能需要较长时间
   - 设置了合理的求解超时限制

## 后续优化方向

1. 功能扩展：
   - 添加音效支持
   - 增加难度等级
   - 添加历史记录
   - 实现排行榜

2. 性能优化：
   - 使用WebSocket实现实时求解
   - 优化A*算法性能
   - 添加缓存机制

3. 用户体验：
   - 添加操作教程
   - 优化移动端适配
   - 增加主题切换
   - 添加分享功能

## 贡献指南

欢迎提交Issue和Pull Request来帮助改进项目。在提交代码前，请确保：

1. 代码符合Python PEP8规范
2. 添加必要的注释和文档
3. 确保所有测试通过
4. 提供清晰的提交信息

## 许可证

本项目采用MIT许可证。详见LICENSE文件。